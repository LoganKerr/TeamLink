{% extends 'templates/base.html.twig' %}

{% block nav %}{% include 'templates/navbar.html.twig' with nav %}{% endblock %}
{% block main %}
    <div id="join-panel" class="panel panel-primary">
        <div class="panel-body">
            <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Create a Team</button>
            {% if length == 0 %}
                You have no teams :(
            {% else %}
            {% if request_method == "POST" %}
                {{ error|length? "An error occurred" : ((message)? message : "Changes saved") }}
            {% endif %}
                <script src='resources/javascript/test.js'></script>
                <form method="post" action='myteams.php' id='myteams_form'>
                <input type="hidden" id="team" name="team" value="-1"></input>
                <table class="table table-striped table-bordered">
                    <tr><th>Team Title</th><th>Description</th><th>Role</th><th></th><th></th></tr>
                    {% for row in rows %}
                        <tr>
                            <td>{{ row['title'] }}</td>
                            <td>{{ row['description'] }}</td>
                            <td>{{ row['role'] }}</td>
                            <td><a href='editteam.php?id={{ row['id'] }}'>Edit</a></td>
                            <td><button type="button" onclick="setDeletedTeam(event, {{ row['id'] }})">Delete Team</button></td>
                        </tr>
                    {% endfor %}
                </table>
                </form>
            {% endif %}
        </div>
    </div>
    {% embed 'templates/modal.html.twig' %}
        {% block modal_header %}
            Create a Team
        {% endblock %}
        {% block modal_content %}
            <form method="post" action="createteam.php">
                <p>
                    <label class="form-label">Title:</label>
                    <input class="textbox" name="title" type="text" value='{{ title }}'/>
                    {{ error['title']? error['title'] }}
                </p>
                <p>
                    <label class="form-label">Description:</label>
                    <textarea name="description">{{ description }}</textarea>
                    {{ error['description']? error['description'] }}
                </p>
                <div class="submit-button"><input class="btn btn-primary btn-block" type="submit" value="Create Team" /></div>
            </form>
        {% endblock %}
    {% endembed %}
{% endblock %}
